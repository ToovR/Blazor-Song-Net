@page "/library"
@page "/library/{Filter}"
@using Blazor.Song.Net.Client;

<div id="library" name="library" class="content section">
    <div name="searchPanel" class="field has-addons is-fullwidth">
        <div id="librarySearchDiv" class="control is-fullwidth">
            <input class="input is-fullwidth" type="text" @onkeyup=SearchKeyUp placeholder='Exemple de filtre -> artist:"David Bowie" title:"/H(e|é)roe?s/"' @bind="Filter" @onkeypress="SearchInputKeyPressed" />
        </div>
        <div class="control">
            <a class="button is-info" @onclick=FilterClick>
                Rechercher
            </a>
        </div>
    </div>
    @if (!IsLibraryLoaded)
    {
        <a class="button is-info" @onclick=LoadLibraryClick>
            Load library
        </a>
    }
    else
    {
        <SongList Tracks="@TrackListFiltered" CurrentTrack="@CurrentTrack">
            <RowTemplate>
                <tr class="libraryRow @((context.ClickMarker.HasValue ?( context.ClickMarker.Value ? "libraryItemClicked": "libraryItemClicked2"):""))">
                    <td><button class="button is-info libButton" @onclick="( e => AddPlaylistClick(context))"><i class="fa fa-plus"></i></button>@context.Title</td>
                    <td>@context.Artist</td>
                    <td>@context.Duration.ToString("mm\\:ss")</td>
                </tr>
            </RowTemplate>
        </SongList>
    }
</div>